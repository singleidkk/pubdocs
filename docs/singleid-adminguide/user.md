**SingleID 管理者ポータル＞ユーザ一覧**画面では、以下のユーザに関する操作を行うことができます。

* ユーザの登録/編集/削除
* ユーザの無効化/有効化
* 証明書の発行/失効
* パスワードの変更/リセット
* ユーザの一括登録
* ユーザのエクスポート

## ユーザの登録/編集/削除
### ユーザの登録
1. **登録**ボタンをクリックします。
2. **ユーザ登録**画面がポップアップします。
3. **基本情報**、**組織情報**、**グループ**を設定します。
4. **登録**をクリックして、ユーザを登録します。
5. ユーザのメールアドレス宛に**ユーザの登録通知**のメールが送信されます。

!!! info
    * **基本情報**タブのパスワード項目において、**設定URLメール送信**を選択した場合には、ユーザのメールアドレス宛へパスワード設定の案内が送信されます。パスワード設定リンクの**有効期間は1日**です。

!!! warning
    * **基本情報**タブの**ユーザ名**は、登録後に変更することができません。
    * デフォルトでは、複数ユーザで同一のメールアドレスを設定することはできません。

### ユーザの編集
1. 変更したいユーザの行にある**編集**ボタンをクリックします。
2. **ユーザ更新**画面がポップアップします。
3. 項目を変更して、**更新**ボタンをクリックして、変更を保存します。

### ユーザの削除
1. 削除したいユーザの行にある**削除**ボタンをクリックします。
2. **ユーザ削除**画面がポップアップします。
3. **削除**ボタンをクリックして、ユーザを削除します。
!!! danger
    * 削除されたユーザに、証明書が発行されていた場合には、そのユーザに関連付いた**証明書は全て失効されて使用できなくなります。**
    * **削除されたユーザを復元することはできません。**誤って削除してしまった場合には、同一のユーザ名でユーザを登録し直してください。

## ユーザの無効化/有効化
ユーザアカウントの不正ログインが疑われた場合には、ユーザのアカウントを無効にすることで、システムへのログインを拒否することができます。

!!! warning
    ユーザが無効化されても、そのユーザに関連付いたクライアント証明書は有効のままです。クライアント証明書の有効性の確認だけを利用して認証を行っているシステムの場合には、ユーザのログインを拒否することができません。

### ユーザの無効化
1. 無効化したいユーザの行にある**チェックボックス**を選択します。（複数選択可能）
2. **選択実行**ボタンの▼をクリックし、プルダウンメニューの**ユーザの無効化**を選択します。
3. **ユーザの無効化**画面がポップアップします。
4. **無効化**ボタンをクリックして、ユーザを無効化します。

### ユーザの有効化
1. 有効化したいユーザの行にある**チェックボックス**を選択します。（複数選択可能）
2. **選択実行**ボタンの▼をクリックし、プルダウンメニューの**ユーザの有効化**を選択します。
3. **ユーザの有効化**画面がポップアップします。
4. **有効化**ボタンをクリックして、ユーザを有効化します。

## 証明書の発行/失効
クライアント証明書を使用した認証を行うため、事前に、ユーザにクライアント証明書を発行し、クライアント証明書をデバイス（PC、スマートフォン、タブレットなど）へインストールしておく必要があります。

### クライアント証明書の発行
**PKCS#12形式(拡張子P12)**または**Apple構成プロファイル形式（拡張子mobileconfig）**のクライアント証明書（クライアント証明書、クライアント証明書の秘密鍵、中間CAの証明書、ルートCAの証明書を含む）を発行します。提供されるクライアント証明書は、パスワード設定がされています。デフォルト設定では、ユーザのメールアドレス宛に発行されたクライアント証明書のダウンロードリンクが送信されます。

!!! info
    * ユーザのメールアドレス宛にクライアント証明書のダウンロードリンクを送信したくない場合には、**SingleID 管理者ポータル＞管理＞詳細設定**画面の**証明書＞発行時にメール通知**を**無効**にします。発行されたクライアント証明書は、**SingleID 管理者ポータル＞認証＞証明書**画面の**証明書**タブからダウンロードすることができます。
    * クライアント証明書をデバイスへインストールする場合には、パスワードの入力が要求されます。**パスワードは、ユーザ名と同一**です。（例：ユーザ名が**user1**の場合、クライアント証明書のパスワードは、**user1**です。）

1. クライアント証明書を発行したいユーザの行にある**チェックボックス**を選択します。（複数選択可能）
2. **選択実行**ボタンの▼をクリックし、プルダウンメニューの**証明書の発行**を選択します。
3. **証明書発行**画面がポップアップします。
4. **プロファイル**を選択します。（例：デフォルト）
5. **配布形式**を選択します。

    * 一般・・・PKCS#12形式(拡張子P12)またはApple構成プロファイル形式（拡張子mobileconfig）
    * Windows自動構成・・・Windows10/11へ証明書を自動でインストールするツール

    !!! info
        配布形式の選択画面が表示されない場合には、**SingleID 管理者ポータル＞管理＞詳細設定**画面の**証明書＞発行時にメール通知**が**無効**に設定されています。

6. **発行**ボタンをクリックして、クライアント証明書を発行します。**SingleID 管理者ポータル＞管理＞詳細設定**画面の**証明書＞発行時にメール通知**が**有効**の場合には、ユーザのメールアドレス宛に発行されたクライアント証明書のダウンロードリンクが送信されます。
    
    !!! warning
        クライアント証明書のダウンロードリンクには**1週間**の有効期限があります。期限が過ぎるとURLリンクへアクセスしてもダウンロードできません。有効期限が切れた場合には、**SingleID 管理者ポータル＞認証＞証明書**画面からクライアント証明書のダウンロードリンクを再送することができます。再送可能な期間は、クライアント証明書を発行してから**1か月間**です。

### クライアント証明書の失効
特定のユーザに関連付いた全てのクライアント証明書を失効します。特定のクライアント証明書のみを失効させたい場合には、**SingleID 管理者ポータル＞認証＞証明書**画面の**証明書**タブからクライアント証明書を失効することができます。

1. クライアント証明書を失効したいユーザの行にある**チェックボックス**を選択します。（複数選択可能）
2. **選択実行**ボタンの▼をクリックし、プルダウンメニューの**証明書の失効**を選択します。
3. **証明書失効**画面がポップアップします。
4. **失効**ボタンをクリックして、クライアント証明書を失効します。

## パスワードの変更

### ユーザのパスワードの変更
1. 変更したいユーザの行にある**編集**ボタンをクリックします。
2. **ユーザ更新**画面がポップアップします。
3. パスワード設定項目の**入力設定**を選択し、パスワードを設定します。
4. **更新**ボタンをクリックして、変更を保存します。

!!! info
    パスワードで利用可能な特殊文字は、**!#%$?&'():;"+*<>_-@^,.**です。

### ユーザのパスワードのリセット
1. 変更したいユーザの行にある**編集**ボタンをクリックします。
2. **ユーザ更新**画面がポップアップします。
3. パスワード設定項目の**設定URLメール送信**を選択します。
4. **更新**ボタンをクリックして、変更を保存します。
5. **アカウント更新**がユーザのメールアドレス宛に送信されます。メール内のリンクをクリックすることで、ユーザ自身がパスワードを変更することができます。

## ユーザの一括登録

大量のユーザを登録する必要がある場合に、CSVファイルをインポートすることで、一括でユーザを登録することができます。

1. **一括登録**ボタンをクリックします。
2. **ファイル**に、一括登録するユーザ情報を含む**CSVファイル**を選択します。
3. CSVファイルに、既存ユーザの情報が含まれていた場合に、CSVファイルのユーザ情報で既存ユーザを上書きするには、**既存ユーザの上書き**を有効にします。

[サンプルCSVファイルのダウンロード](./users_sample.csv){ target=_blank .md-button .md-button--primary }

## ユーザのエクスポート

**CSVダウンロード**または**Excelダウンロード**ボタンをクリックし、登録されたユーザ情報の一覧をCSVファイルまたはExcelファイルでエクスポートすることができます。

!!! info
    ダウンロードしたCSVファイルは、ユーザの一括登録のCSVフォーマットと同一です。